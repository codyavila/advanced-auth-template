{"ast":null,"code":"import _regeneratorRuntime from\"/Users/codysanders/Projects/auth-template/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/codysanders/Projects/auth-template/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/codysanders/Projects/auth-template/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{Link,useParams}from'react-router-dom';import axios from'axios';import'./resetPasswordScreen.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ResetPasswordScreen=function ResetPasswordScreen(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setPassword=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),confirmPassword=_useState4[0],setConfirmPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),success=_useState8[0],setSuccess=_useState8[1];var id=useParams();var resetPasswordHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var config,_yield$axios$put,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();config={header:{'Content-Type':'application/json'}};if(!(password!==confirmPassword)){_context.next=7;break;}setPassword('');setConfirmPassword('');setTimeout(function(){setError('');},5000);return _context.abrupt(\"return\",setError(\"Passwords don't match\"));case 7:_context.prev=7;_context.next=10;return axios.put(\"/api/auth/resetpassword/\".concat(id.resetToken),{password:password},config);case 10:_yield$axios$put=_context.sent;data=_yield$axios$put.data;setSuccess(data.data);_context.next=19;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](7);setError(_context.t0.message);setTimeout(function(){setError('');},5000);case 19:case\"end\":return _context.stop();}}},_callee,null,[[7,15]]);}));return function resetPasswordHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"resetpassword-screen\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:resetPasswordHandler,className:\"resetpassword-screen__form\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"resetpassword-screen__title\",children:\"Forgot Password\"}),error&&/*#__PURE__*/_jsxs(\"span\",{className:\"error-message\",children:[error,\" \"]}),success&&/*#__PURE__*/_jsxs(\"span\",{className:\"success-message\",children:[success,\" \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"New Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,id:\"password\",placeholder:\"Enter new password\",autoComplete:\"true\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmpassword\",children:\"Confirm New Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,id:\"confirmpassword\",placeholder:\"Confirm new password\",autoComplete:\"true\",value:confirmPassword,onChange:function onChange(e){return setConfirmPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Reset Password\"})]})});};export default ResetPasswordScreen;","map":{"version":3,"names":["useState","Link","useParams","axios","ResetPasswordScreen","password","setPassword","confirmPassword","setConfirmPassword","error","setError","success","setSuccess","id","resetPasswordHandler","e","preventDefault","config","header","setTimeout","put","resetToken","data","message","target","value"],"sources":["/Users/codysanders/Projects/auth-template/client/src/components/screens/ResetPasswordScreen/ResetPasswordScreen.js"],"sourcesContent":["import { useState } from 'react'\nimport { Link, useParams } from 'react-router-dom'\nimport axios from 'axios'\n\nimport './resetPasswordScreen.css'\n\nconst ResetPasswordScreen = () => {\n  const [password, setPassword] = useState('')\n  const [confirmPassword, setConfirmPassword] = useState('')\n  const [error, setError] = useState('')\n  const [success, setSuccess] = useState('')\n\n const id = useParams()\n\n  const resetPasswordHandler = async (e) => {\n    e.preventDefault()\n\n    const config = {\n      header: {\n        'Content-Type': 'application/json'\n      }\n    }\n\n    if (password !== confirmPassword) {\n      setPassword('')\n      setConfirmPassword('')\n      setTimeout(() => {\n        setError('')\n      }, 5000)\n      return setError(\"Passwords don't match\")\n    }\n\n    try {\n      const { data } = await axios.put(\n        `/api/auth/resetpassword/${id.resetToken}`,\n        {\n          password\n        },\n        config\n      )\n\n      setSuccess(data.data)\n    } catch (error) {\n      setError(error.message)\n      setTimeout(() => {\n        setError('')\n      }, 5000)\n    }\n  }\n\n  return (\n    <div className='resetpassword-screen'>\n      <form\n        onSubmit={resetPasswordHandler}\n        className='resetpassword-screen__form'>\n        <h3 className='resetpassword-screen__title'>Forgot Password</h3>\n        {error && <span className='error-message'>{error} </span>}\n        {success && (\n          <span className='success-message'>\n            {success} <Link to='/login'>Login</Link>\n          </span>\n        )}\n        <div className='form-group'>\n          <label htmlFor='password'>New Password:</label>\n          <input\n            type='password'\n            required\n            id='password'\n            placeholder='Enter new password'\n            autoComplete='true'\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </div>\n        <div className='form-group'>\n          <label htmlFor='confirmpassword'>Confirm New Password:</label>\n          <input\n            type='password'\n            required\n            id='confirmpassword'\n            placeholder='Confirm new password'\n            autoComplete='true'\n            value={confirmPassword}\n            onChange={(e) => setConfirmPassword(e.target.value)}\n          />\n        </div>\n        <button type='submit' className='btn btn-primary'>\n          Reset Password\n        </button>\n      </form>\n    </div>\n  )\n}\n\nexport default ResetPasswordScreen\n"],"mappings":"kaAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,OAASC,IAAT,CAAeC,SAAf,KAAgC,kBAAhC,CACA,MAAOC,MAAP,KAAkB,OAAlB,CAEA,MAAO,2BAAP,C,wFAEA,GAAMC,oBAAmB,CAAG,QAAtBA,oBAAsB,EAAM,CAChC,cAAgCJ,QAAQ,CAAC,EAAD,CAAxC,wCAAOK,QAAP,eAAiBC,WAAjB,eACA,eAA8CN,QAAQ,CAAC,EAAD,CAAtD,yCAAOO,eAAP,eAAwBC,kBAAxB,eACA,eAA0BR,QAAQ,CAAC,EAAD,CAAlC,yCAAOS,KAAP,eAAcC,QAAd,eACA,eAA8BV,QAAQ,CAAC,EAAD,CAAtC,yCAAOW,OAAP,eAAgBC,UAAhB,eAED,GAAMC,GAAE,CAAGX,SAAS,EAApB,CAEC,GAAMY,qBAAoB,4FAAG,iBAAOC,CAAP,qJAC3BA,CAAC,CAACC,cAAF,GAEMC,MAHqB,CAGZ,CACbC,MAAM,CAAE,CACN,eAAgB,kBADV,CADK,CAHY,MASvBb,QAAQ,GAAKE,eATU,0BAUzBD,WAAW,CAAC,EAAD,CAAX,CACAE,kBAAkB,CAAC,EAAD,CAAlB,CACAW,UAAU,CAAC,UAAM,CACfT,QAAQ,CAAC,EAAD,CAAR,CACD,CAFS,CAEP,IAFO,CAAV,CAZyB,gCAelBA,QAAQ,CAAC,uBAAD,CAfU,gDAmBFP,MAAK,CAACiB,GAAN,mCACMP,EAAE,CAACQ,UADT,EAErB,CACEhB,QAAQ,CAARA,QADF,CAFqB,CAKrBY,MALqB,CAnBE,wCAmBjBK,IAnBiB,kBAmBjBA,IAnBiB,CA2BzBV,UAAU,CAACU,IAAI,CAACA,IAAN,CAAV,CA3ByB,iFA6BzBZ,QAAQ,CAAC,YAAMa,OAAP,CAAR,CACAJ,UAAU,CAAC,UAAM,CACfT,QAAQ,CAAC,EAAD,CAAR,CACD,CAFS,CAEP,IAFO,CAAV,CA9ByB,qEAAH,kBAApBI,qBAAoB,4CAA1B,CAoCA,mBACE,YAAK,SAAS,CAAC,sBAAf,uBACE,cACE,QAAQ,CAAEA,oBADZ,CAEE,SAAS,CAAC,4BAFZ,wBAGE,WAAI,SAAS,CAAC,6BAAd,6BAHF,CAIGL,KAAK,eAAI,cAAM,SAAS,CAAC,eAAhB,WAAiCA,KAAjC,OAJZ,CAKGE,OAAO,eACN,cAAM,SAAS,CAAC,iBAAhB,WACGA,OADH,kBACY,KAAC,IAAD,EAAM,EAAE,CAAC,QAAT,mBADZ,GANJ,cAUE,aAAK,SAAS,CAAC,YAAf,wBACE,cAAO,OAAO,CAAC,UAAf,2BADF,cAEE,cACE,IAAI,CAAC,UADP,CAEE,QAAQ,KAFV,CAGE,EAAE,CAAC,UAHL,CAIE,WAAW,CAAC,oBAJd,CAKE,YAAY,CAAC,MALf,CAME,KAAK,CAAEN,QANT,CAOE,QAAQ,CAAE,kBAACU,CAAD,QAAOT,YAAW,CAACS,CAAC,CAACS,MAAF,CAASC,KAAV,CAAlB,EAPZ,EAFF,GAVF,cAsBE,aAAK,SAAS,CAAC,YAAf,wBACE,cAAO,OAAO,CAAC,iBAAf,mCADF,cAEE,cACE,IAAI,CAAC,UADP,CAEE,QAAQ,KAFV,CAGE,EAAE,CAAC,iBAHL,CAIE,WAAW,CAAC,sBAJd,CAKE,YAAY,CAAC,MALf,CAME,KAAK,CAAElB,eANT,CAOE,QAAQ,CAAE,kBAACQ,CAAD,QAAOP,mBAAkB,CAACO,CAAC,CAACS,MAAF,CAASC,KAAV,CAAzB,EAPZ,EAFF,GAtBF,cAkCE,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,iBAAhC,4BAlCF,GADF,EADF,CA0CD,CAtFD,CAwFA,cAAerB,oBAAf"},"metadata":{},"sourceType":"module"}