{"ast":null,"code":"import _regeneratorRuntime from\"/Users/codysanders/Projects/auth-template/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/codysanders/Projects/auth-template/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/codysanders/Projects/auth-template/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import axios from'axios';import{Link,useNavigate}from'react-router-dom';import'./loginScreen.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginScreen=function LoginScreen(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var navigate=useNavigate();useEffect(function(){if(localStorage.getItem('authToken')){navigate('/');}},[navigate]);var loginHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var config,_yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();config={header:{'Content-Type':'application/json'}};_context.prev=2;_context.next=5;return axios.post('/api/auth/login',{email:email,password:password},config);case 5:_yield$axios$post=_context.sent;data=_yield$axios$post.data;localStorage.setItem('authToken',data.token);navigate('/');_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);setError(_context.t0.response.data.error);setTimeout(function(){setError('');},5000);case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);}));return function loginHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"login-screen\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:loginHandler,className:\"login-screen__form\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"login-screen__title\",children:\"Login\"}),error&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",required:true,id:\"email\",placeholder:\"Email address\",onChange:function onChange(e){return setEmail(e.target.value);},value:email,tabIndex:1})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"password\",children:[\"Password:\",' ',/*#__PURE__*/_jsx(Link,{to:\"/forgotpassword\",className:\"login-screen__forgotpassword\",children:\"Forgot Password?\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,id:\"password\",autoComplete:\"true\",placeholder:\"Enter password\",onChange:function onChange(e){return setPassword(e.target.value);},value:password,tabIndex:2})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"login-screen__subtext\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register\"})]})]})});};export default LoginScreen;","map":{"version":3,"names":["useState","useEffect","axios","Link","useNavigate","LoginScreen","email","setEmail","password","setPassword","error","setError","navigate","localStorage","getItem","loginHandler","e","preventDefault","config","header","post","data","setItem","token","response","setTimeout","target","value"],"sources":["/Users/codysanders/Projects/auth-template/client/src/components/screens/LoginScreen/LoginScreen.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport { Link, useNavigate } from 'react-router-dom'\nimport './loginScreen.css'\n\nconst LoginScreen = () => {\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [error, setError] = useState('')\n\n  const navigate = useNavigate()\n\n  useEffect(() => {\n    if (localStorage.getItem('authToken')) {\n      navigate('/')\n    }\n  }, [navigate])\n\n  const loginHandler = async (e) => {\n    e.preventDefault()\n\n    const config = {\n      header: {\n        'Content-Type': 'application/json'\n      }\n    }\n\n    try {\n      const { data } = await axios.post(\n        '/api/auth/login',\n        { email, password },\n        config\n      )\n\n      localStorage.setItem('authToken', data.token)\n\n      navigate('/')\n    } catch (error) {\n      setError(error.response.data.error)\n      setTimeout(() => {\n        setError('')\n      }, 5000)\n    }\n  }\n\n  return (\n    <div className='login-screen'>\n      <form onSubmit={loginHandler} className='login-screen__form'>\n        <h3 className='login-screen__title'>Login</h3>\n        {error && <span className='error-message'>{error}</span>}\n        <div className='form-group'>\n          <label htmlFor='email'>Email:</label>\n          <input\n            type='email'\n            required\n            id='email'\n            placeholder='Email address'\n            onChange={(e) => setEmail(e.target.value)}\n            value={email}\n            tabIndex={1}\n          />\n        </div>\n        <div className='form-group'>\n          <label htmlFor='password'>\n            Password:{' '}\n            <Link to='/forgotpassword' className='login-screen__forgotpassword'>\n              Forgot Password?\n            </Link>\n          </label>\n          <input\n            type='password'\n            required\n            id='password'\n            autoComplete='true'\n            placeholder='Enter password'\n            onChange={(e) => setPassword(e.target.value)}\n            value={password}\n            tabIndex={2}\n          />\n        </div>\n        <button type='submit' className='btn btn-primary'>\n          Login\n        </button>\n\n        <span className='login-screen__subtext'>\n          Don't have an account? <Link to='/register'>Register</Link>\n        </span>\n      </form>\n    </div>\n  )\n}\n\nexport default LoginScreen\n"],"mappings":"kaAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,CAAeC,WAAf,KAAkC,kBAAlC,CACA,MAAO,mBAAP,C,wFAEA,GAAMC,YAAW,CAAG,QAAdA,YAAc,EAAM,CACxB,cAA0BL,QAAQ,CAAC,EAAD,CAAlC,wCAAOM,KAAP,eAAcC,QAAd,eACA,eAAgCP,QAAQ,CAAC,EAAD,CAAxC,yCAAOQ,QAAP,eAAiBC,WAAjB,eACA,eAA0BT,QAAQ,CAAC,EAAD,CAAlC,yCAAOU,KAAP,eAAcC,QAAd,eAEA,GAAMC,SAAQ,CAAGR,WAAW,EAA5B,CAEAH,SAAS,CAAC,UAAM,CACd,GAAIY,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAJ,CAAuC,CACrCF,QAAQ,CAAC,GAAD,CAAR,CACD,CACF,CAJQ,CAIN,CAACA,QAAD,CAJM,CAAT,CAMA,GAAMG,aAAY,4FAAG,iBAAOC,CAAP,sJACnBA,CAAC,CAACC,cAAF,GAEMC,MAHa,CAGJ,CACbC,MAAM,CAAE,CACN,eAAgB,kBADV,CADK,CAHI,uCAUMjB,MAAK,CAACkB,IAAN,CACrB,iBADqB,CAErB,CAAEd,KAAK,CAALA,KAAF,CAASE,QAAQ,CAARA,QAAT,CAFqB,CAGrBU,MAHqB,CAVN,wCAUTG,IAVS,mBAUTA,IAVS,CAgBjBR,YAAY,CAACS,OAAb,CAAqB,WAArB,CAAkCD,IAAI,CAACE,KAAvC,EAEAX,QAAQ,CAAC,GAAD,CAAR,CAlBiB,iFAoBjBD,QAAQ,CAAC,YAAMa,QAAN,CAAeH,IAAf,CAAoBX,KAArB,CAAR,CACAe,UAAU,CAAC,UAAM,CACfd,QAAQ,CAAC,EAAD,CAAR,CACD,CAFS,CAEP,IAFO,CAAV,CArBiB,qEAAH,kBAAZI,aAAY,4CAAlB,CA2BA,mBACE,YAAK,SAAS,CAAC,cAAf,uBACE,cAAM,QAAQ,CAAEA,YAAhB,CAA8B,SAAS,CAAC,oBAAxC,wBACE,WAAI,SAAS,CAAC,qBAAd,mBADF,CAEGL,KAAK,eAAI,aAAM,SAAS,CAAC,eAAhB,UAAiCA,KAAjC,EAFZ,cAGE,aAAK,SAAS,CAAC,YAAf,wBACE,cAAO,OAAO,CAAC,OAAf,oBADF,cAEE,cACE,IAAI,CAAC,OADP,CAEE,QAAQ,KAFV,CAGE,EAAE,CAAC,OAHL,CAIE,WAAW,CAAC,eAJd,CAKE,QAAQ,CAAE,kBAACM,CAAD,QAAOT,SAAQ,CAACS,CAAC,CAACU,MAAF,CAASC,KAAV,CAAf,EALZ,CAME,KAAK,CAAErB,KANT,CAOE,QAAQ,CAAE,CAPZ,EAFF,GAHF,cAeE,aAAK,SAAS,CAAC,YAAf,wBACE,eAAO,OAAO,CAAC,UAAf,uBACY,GADZ,cAEE,KAAC,IAAD,EAAM,EAAE,CAAC,iBAAT,CAA2B,SAAS,CAAC,8BAArC,8BAFF,GADF,cAOE,cACE,IAAI,CAAC,UADP,CAEE,QAAQ,KAFV,CAGE,EAAE,CAAC,UAHL,CAIE,YAAY,CAAC,MAJf,CAKE,WAAW,CAAC,gBALd,CAME,QAAQ,CAAE,kBAACU,CAAD,QAAOP,YAAW,CAACO,CAAC,CAACU,MAAF,CAASC,KAAV,CAAlB,EANZ,CAOE,KAAK,CAAEnB,QAPT,CAQE,QAAQ,CAAE,CARZ,EAPF,GAfF,cAiCE,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,iBAAhC,mBAjCF,cAqCE,cAAM,SAAS,CAAC,uBAAhB,kDACyB,KAAC,IAAD,EAAM,EAAE,CAAC,WAAT,sBADzB,GArCF,GADF,EADF,CA6CD,CArFD,CAuFA,cAAeH,YAAf"},"metadata":{},"sourceType":"module"}