{"ast":null,"code":"import _regeneratorRuntime from\"/Users/codysanders/Projects/auth-template/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/codysanders/Projects/auth-template/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/codysanders/Projects/auth-template/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import'./privateScreen.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PrivateScreen=function PrivateScreen(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),privateData=_useState4[0],setPrivateData=_useState4[1];var navigate=useNavigate();useEffect(function(){var fetchPrivateDate=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var config,_yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config={headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(localStorage.getItem('authToken'))}};_context.prev=1;_context.next=4;return axios.get('/api/private',config);case 4:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setPrivateData(data.data);_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);localStorage.removeItem('authToken');setError('You are not authorized please login');case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function fetchPrivateDate(){return _ref.apply(this,arguments);};}();fetchPrivateDate();},[]);var logoutHandler=function logoutHandler(){localStorage.removeItem('authToken');navigate('/login');};return error?/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{background:'green',color:'white'},children:privateData}),/*#__PURE__*/_jsx(\"button\",{onClick:logoutHandler,children:\"Logout\"})]});};export default PrivateScreen;","map":{"version":3,"names":["useState","useEffect","useNavigate","axios","PrivateScreen","error","setError","privateData","setPrivateData","navigate","fetchPrivateDate","config","headers","Authorization","localStorage","getItem","get","data","removeItem","logoutHandler","background","color"],"sources":["/Users/codysanders/Projects/auth-template/client/src/components/screens/PrivateScreen/PrivateScreen.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport axios from 'axios'\nimport './privateScreen.css'\n\nconst PrivateScreen = () => {\n  const [error, setError] = useState('')\n  const [privateData, setPrivateData] = useState('')\n\n  const navigate = useNavigate()\n\n  useEffect(() => {\n    const fetchPrivateDate = async () => {\n      const config = {\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${localStorage.getItem('authToken')}`\n        }\n      }\n\n      try {\n        const { data } = await axios.get('/api/private', config)\n        setPrivateData(data.data)\n      } catch (error) {\n        localStorage.removeItem('authToken')\n        setError('You are not authorized please login')\n      }\n    }\n\n    fetchPrivateDate()\n  }, [])\n\n  const logoutHandler = () => {\n    localStorage.removeItem('authToken')\n    navigate('/login')\n  }\n\n  return error ? (\n    <span className='error-message'>{error}</span>\n  ) : (\n    <>\n      <div style={{ background: 'green', color: 'white' }}>{privateData}</div>\n      <button onClick={logoutHandler}>Logout</button>\n    </>\n  )\n}\n\nexport default PrivateScreen\n"],"mappings":"kaAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAO,qBAAP,C,6IAEA,GAAMC,cAAa,CAAG,QAAhBA,cAAgB,EAAM,CAC1B,cAA0BJ,QAAQ,CAAC,EAAD,CAAlC,wCAAOK,KAAP,eAAcC,QAAd,eACA,eAAsCN,QAAQ,CAAC,EAAD,CAA9C,yCAAOO,WAAP,eAAoBC,cAApB,eAEA,GAAMC,SAAQ,CAAGP,WAAW,EAA5B,CAEAD,SAAS,CAAC,UAAM,CACd,GAAMS,iBAAgB,4FAAG,sKACjBC,MADiB,CACR,CACbC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPC,aAAa,kBAAYC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAZ,CAFN,CADI,CADQ,uCASEZ,MAAK,CAACa,GAAN,CAAU,cAAV,CAA0BL,MAA1B,CATF,uCASbM,IATa,kBASbA,IATa,CAUrBT,cAAc,CAACS,IAAI,CAACA,IAAN,CAAd,CAVqB,+EAYrBH,YAAY,CAACI,UAAb,CAAwB,WAAxB,EACAZ,QAAQ,CAAC,qCAAD,CAAR,CAbqB,oEAAH,kBAAhBI,iBAAgB,0CAAtB,CAiBAA,gBAAgB,GACjB,CAnBQ,CAmBN,EAnBM,CAAT,CAqBA,GAAMS,cAAa,CAAG,QAAhBA,cAAgB,EAAM,CAC1BL,YAAY,CAACI,UAAb,CAAwB,WAAxB,EACAT,QAAQ,CAAC,QAAD,CAAR,CACD,CAHD,CAKA,MAAOJ,MAAK,cACV,aAAM,SAAS,CAAC,eAAhB,UAAiCA,KAAjC,EADU,cAGV,wCACE,YAAK,KAAK,CAAE,CAAEe,UAAU,CAAE,OAAd,CAAuBC,KAAK,CAAE,OAA9B,CAAZ,UAAsDd,WAAtD,EADF,cAEE,eAAQ,OAAO,CAAEY,aAAjB,oBAFF,GAHF,CAQD,CAxCD,CA0CA,cAAef,cAAf"},"metadata":{},"sourceType":"module"}